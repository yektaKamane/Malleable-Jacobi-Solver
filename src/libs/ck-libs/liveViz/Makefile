CDIR=../../../..
CHARMC=$(CDIR)/bin/charmc $(OPTS)
FLAGS=-DEXTERIOR_BLACK_PIXEL_ELIMINATION

HEADERS=liveViz.h liveViz.decl.h liveVizPoll.decl.h liveViz0.h colorScale.h ImageData.h
HEADDEP=$(HEADERS) liveViz.def.h networkVar.h \
	ImageData.h
OBJS=liveViz0.o liveViz.o liveVizPoll.o networkVar.o colorScale.o ImageData.o
DEST=$(CDIR)/lib/libmoduleliveViz.a

all: $(DEST)

$(DEST): $(OBJS) $(COMPAT) headers
	$(CHARMC) $(OBJS) $(COMPAT) -o $@

headers: $(HEADERS)
	cp $(HEADERS) $(CDIR)/include/
	touch headers

liveViz0.o: liveViz0.C $(HEADDEP)
	$(CHARMC) -c $(FLAGS) liveViz0.C

liveViz.o: liveViz.C $(HEADDEP)
	$(CHARMC) -c $(FLAGS) liveViz.C

liveVizPoll.o: liveVizPoll.C $(HEADDEP)
	$(CHARMC) -c $(FLAGS) liveVizPoll.C

networkVar.o: networkVar.C $(HEADDEP)
	$(CHARMC) -c $(FLAGS) networkVar.C

colorScale.o: colorScale.C $(HEADDEP)
	$(CHARMC) -c $(FLAGS) colorScale.C

ImageData.o : ImageData.C $(HEADDEP)
	$(CHARMC) -c $(FLAGS) ImageData.C

liveViz.decl.h liveViz.def.h: liveViz.ci
	$(CHARMC) liveViz.ci

liveVizPoll.decl.h liveVizPoll.def.h: liveVizPoll.ci
	$(CHARMC) liveVizPoll.ci

clean:
	rm -rf *.a *.def.h *.decl.h *.o SunWS_cache $(DEST) headers
