mainmodule barnes {

  readonly CProxy_Main mainChare;
  readonly CProxy_TreePiece pieces;
  readonly CProxy_ParticleChunk chunks;
  readonly int numTreePieces;
  readonly int numParticleChunks;

  message ParticleMsg{
    body *particles;
  };

  mainchare [migratable] Main {
    entry Main();
  };

  array [1D] TreePiece {
    entry TreePiece(); 
    entry void recvParticles(ParticleMsg *msg);
  };

  array [1D] ParticleChunk {
    entry ParticleChunk();
  };
};
