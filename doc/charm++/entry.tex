\subsection{Entry Method Attributes}

\label{attributes}

\charmpp{}  provides a handful of special attributes that \index{entry
method}entry methods may have.  In order to give a particular \index{entry
method}entry method an attribute, you must specify the keyword for the desired
attribute in the attribute list of that entry method's {\tt .ci} file
declaration.  The syntax for this is as follows:

\begin{alltt}
entry [\uw{attribute1}, ..., \uw{attributeN}] void \uw{EntryMethod}(\uw{parameters});
\end{alltt}

\charmpp{} currently offers the following attributes that one may assign to 
an entry method:
\kw{threaded}, \kw{sync}, \kw{exclusive}, \kw{nokeep}, \kw{notrace}, \kw{immediate}, \kw{expedited}, \kw{inline}, \kw{local}, \kw{python}.

\begin{description}
\index{threaded}\item[threaded] \index{entry method}entry methods are
entry methods which are run in their own nonpreemptible threads. These
entry methods may perform blocking operations, such as calls to a
\kw{sync} entry method, or explicitly suspend themselves.

\index{sync}\item[sync] \index{entry method}entry methods are special in that calls to
sync entry methods are blocking - they do not return control to the caller
until the method is finished executing completely.  Sync methods may have
return values; however, they may only return messages. Callers must run in a
thread separate from the runtime scheduler, e.g. a \kw{threaded} entry methods.
Calls expecting a return value will receive it as the return from the proxy invocation:
\begin{alltt}
ReturnMsg* m;
m = A[i].foo(a, b, c);
\end{alltt}

\index{exclusive}\item[exclusive] entry methods, which exist only on node groups, are
\index{entry method}entry methods that do not execute while other exclusive
\index{entry method}entry methods of its node group are executing in the same
node.  If one exclusive method of a node group is executing on node 0, and
another one is scheduled to run on that same node, the second exclusive method
will wait for the first to finish before it executes.

\index{nokeep}\item[nokeep] entry methods tells Charm++ that messages passed to
these user entry methods will not be kept by the calls. Charm++ runtime
may be able to adopt optimization for reusing the message memory.

\index{notrace}\item[notrace] entry methods simply tells Charm++ that calls to 
these entry methods should be not traced in trace projections or summary mode.

\index{immediate}\item[immediate] entry methods are entry functions in which 
short messages can be executed in an ``immediate'' fashion when they are
received either by an interrupt (Network version) or by a communication thread
(in SMP version). Such messages can be useful for implementing
multicasts/reductions as well as data lookup, in which case processing of
critical messages won't be delayed (in the scheduler queue) by entry functions
that could take long time to finish. Immediate messages are only available for
nodegroup entry methods. Immediate messages are implicitly ``exclusive'' on each
node, that is one execution of immediate message will not be interrupted by
another. Function \kw{CmiProbeImmediateMsg()} can be called in users code to
probe and process immediate messages periodically.

\index{expedited}\item[expedited] entry methods are entry functions 
that skip Charm++'s priority-based message queue. It is useful for messages that
require prompt processing however in the situation when immediate message does
not apply. Compared with immediate message, it provides a more general solution
that works for all Charm++ objects, i.e. Chare, Group, NodeGroup and Chare
Array. However, expedited message still needs to be scheduled in low level
Converse message queue and be processed in the order of arrival. It may still
suffer from long running entry methods.

\index{inline}\item[inline] entry methods are entry functions in which the
message is delivered immediately to the recipient if it happens to reside on the
same processor. Therefore, these entry methods need to be reentrant, as they
could be called multiple times recursively. If the recipient reside on another
processor, a regular message is sent, and \kw{inline} has no effect.

\index{local}\item[local] entry methods are equivalent to function calls: the
entry method is always called immediately. This feature is available only for
Groups and Chare Arrays. The user has to guarantee that the recipient chare
element reside on the same processor, a failure will result in the application
to abort. In contrast will all other entry methods where input parameters are
marshalled into a message, \kw{local} entry methods pass them direcly to the
callee. This implies that the callee can modify the caller data if this is
passed by pointer or reference. Furthermore, the input parameters do not require
to be PUPable. Being these entry methods always called immediately, they are
allowed to have a non-void return type. Nevertheless, the returned type must be
a pointer.

\index{python}\item[python] entry methods are methods which are enabled to be
called from python scripts running as explained in section~\ref{python}. In
order to work, the object owning the method must also be declared with the
keyword \kw{python}.

\index{reductiontarget}\item[reductiontarget] entry methods may be used as the
target of reductions, despite not taking CkReductionMsg as an argument.
See~\ref{typed_reductions}.

\end{description}
